@model ArticleWithCommentsModel

<h1>@Model.ArticleModel.Title</h1>
<p>@Model.ArticleModel.Text</p>

@if (Model.CommentsModels.Count > 0)
{
    foreach (var comment in Model.CommentsModels)
    {
        if (comment.IsEditing)
        {
            <form asp-action="UpdateComment" method="post">
                <input type="hidden" name="commentId" value="@comment.Id" />
                <input type="hidden" name="articleId" value="@Model.ArticleModel.Id" />
                <div class="form-group">
                    <textarea name="commentText" asp-for="@comment.Text" class="form-control"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <a asp-action="CancelEdit" asp-route-commentId="@comment.Id" asp-route-articleId="@Model.ArticleModel.Id" class="btn btn-secondary">Cancel</a>
            </form>
        }
        else
        {   <div class="container alert-info">
                <div class = "card-text">@comment.Text</div>            
            </div>
            <form asp-action="EditComment" asp-route-commentId="@comment.Id" asp-route-articleId="@Model.ArticleModel.Id" method="post" class="d-inline">
                <button type="submit" class="btn btn-secondary">Edit</button>
            </form>
            <form asp-action="DeleteComment" asp-route-commentId="@comment.Id" asp-route-articleId="@Model.ArticleModel.Id" method="post" class="d-inline">
                <button type="submit" class="btn btn-danger">Delete</button>
            </form>
        }
    }
}
else
{
    <div>No comments</div>
}

<h3>Add a comment</h3>
<form asp-action="AddComment" method="post">
    <input type="hidden" name="articleId" value="@Model.ArticleModel.Id" />
    <div class="form-group">
        <textarea name="commentText" class="form-control" placeholder="Write your comment here"></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>